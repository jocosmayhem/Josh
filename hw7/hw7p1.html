<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="description" content="Part 1 - Style Application">
    <title>Part 1 - Style Application</title>
    <link rel="stylesheet" href="../styles.css">

    <style>
        #styledContent h2, #styledContent p {
            color:forestgreen; 
            text-shadow: 1px 1px 1px black;
        }
        #formContainer label, #formContainer h2{
            color: forestgreen;
            text-shadow: 1px 1px 1px black;
        }
    </style>
</head>
<body>
    <h1>Style Application</h1>
    
    <div id="formContainer">
        <form id="styleForm">
            <h2>Choose Background Color:</h2>
            <label><input type="radio" name="background" value="lightblue"> Light Blue</label><br>
            <label><input type="radio" name="background" value="lightgreen"> Light Green</label><br><br>

            <h2>Choose Text Style:</h2>
            <label><input type="checkbox" name="style" value="bold"> Bold</label><br>
            <label><input type="checkbox" name="style" value="italic"> Italic</label><br>
            <label><input type="checkbox" name="style" value="underline"> Underline</label><br><br>

            <h2>Choose Font Size:</h2>
            <select name="fontSize">
                <option value="100%">100%</option>
                <option value="120%">120%</option>
                <option value="150%">150%</option>
            </select>
        </form>
    </div>
    
    <div id="styledContent">
        <h2>Styled Content Area</h2>
        <p>This is the first paragraph.</p>
        <p>This is the second paragraph.</p>
        <p>This is the third paragraph.</p>
    </div>

    <script>
        const styledContent = document.getElementById('styledContent');
        const form = document.getElementById('styleForm');

        // Retrieve cookies if available (on page load)
        window.onload = function() {
            const storedBackground = getCookie('background');
            const storedFontSize = getCookie('fontSize');
            const storedStyles = getCookie('styles');

            if (storedBackground) {
                styledContent.style.backgroundColor = storedBackground;
                document.querySelector(`input[name="background"][value="${storedBackground}"]`).checked = true;
            }
            if (storedFontSize) {
                styledContent.style.fontSize = storedFontSize;
                document.querySelector(`select[name="fontSize"]`).value = storedFontSize;
            }
            if (storedStyles) {
                storedStyles.split(',').forEach(style => {
                    styledContent.style[style] = style;
                    document.querySelector(`input[name="style"][value="${style}"]`).checked = true;
                });
            }
        };

        form.addEventListener('change', () => {
            const background = form.querySelector('input[name="background"]:checked')?.value;
            const fontSize = form.querySelector('select[name="fontSize"]').value;

            // Apply styles immediately
            styledContent.style.backgroundColor = background || '';
            styledContent.style.fontSize = fontSize;

            // Collect checked styles
            const styles = Array.from(form.querySelectorAll('input[name="style"]:checked')).map(input => input.value);
            styledContent.style.fontWeight = styles.includes('bold') ? 'bold' : '';
            styledContent.style.fontStyle = styles.includes('italic') ? 'italic' : '';
            styledContent.style.textDecoration = styles.includes('underline') ? 'underline' : '';

            document.cookie = `background=${background}; path=/`;
            document.cookie = `fontSize=${fontSize}; path=/`;
            document.cookie = `styles=${styles.join(',')}; path=/`;
        });

       
        function getCookie(name) {
            const cookieArr = document.cookie.split(';');
            for (let i = 0; i < cookieArr.length; i++) {
                const cookie = cookieArr[i].trim();
                if (cookie.startsWith(name + '=')) {
                    return cookie.substring(name.length + 1);
                }
            }
            return '';
        }

        // Cookies will automatically be deleted when the browser is closed (session cookies)
    </script>

    <div class="back-link">
        <a href="hw7.html">Back to Homework 7</a>
    </div>
</body>
</html>
